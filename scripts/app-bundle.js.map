{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/resources/index.js","src/services/authentication.js","src/services/busy.js","src/services/local.js","src/services/settings.js","src/services/tracker.js","src/pages/backlog/filter-columns.js","src/pages/backlog/sprint.js","src/pages/login/login.js","src/pages/projects/select.js","src/pages/settings/change.js","src/pages/settings/filter-available-options.js","F:/Arbete2016/pivotal-tracker-dashboard/src/app.html","F:/Arbete2016/pivotal-tracker-dashboard/src/assets/styles/animations.css","F:/Arbete2016/pivotal-tracker-dashboard/src/pages/backlog/sprint.html","F:/Arbete2016/pivotal-tracker-dashboard/src/assets/styles/app.css","F:/Arbete2016/pivotal-tracker-dashboard/src/pages/login/login.html","F:/Arbete2016/pivotal-tracker-dashboard/src/pages/projects/select.html","F:/Arbete2016/pivotal-tracker-dashboard/src/pages/settings/change.html"],"names":["App","bindingEngine","router","authentication","busy","tracker","isBusy","project","user","isEnlarged","toggleEnlarged","activate","currentUser","propertyObserver","subscribe","newValue","oldValue","getProject","then","logout","navigate","configureRouter","config","auth","title","addPipelineStep","map","route","moduleId","unAuthedOnly","name","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","Authentication","getUser","isAuthenticated","isValid","token","run","navigationInstruction","next","instructions","getAllInstructions","some","i","cancel","catch","Busy","on","off","Local","g","key","localStorage","getItem","JSON","parse","err","d","s","value","setItem","stringify","Array","isArray","forEach","removeItem","Settings","storyStates","columnBaseTypes","columns","basedOn","Tracker","client","local","ls","projectId","_projects","_currentUser","_users","_token","_configureClient","withBaseUrl","withDefaults","headers","_fetch","url","inBackground","resolve","reject","fetch","response","json","kind","Error","code","error","parseInt","getProjects","projects","item","id","length","getCurrent","getUsers","users","result","_projectId","FilterColumnsValueConverter","toView","array","slice","filter","current_state","y","labels","Sprint","settings","iteration","timeout","pollInterval","params","routeConfig","startPoll","deactivate","clearTimeout","userId","person","isFirst","setTimeout","bind","Login","placeholder","setToken","console","log","Select","attached","Change","bindingSignaler","subscriptions","availableStoryStates","subscription","pop","dispose","valueArrayChanged","valueHasChanged","signal","removeValueFromColumn","column","splice","indexOf","addValueForColumn","push","available","hasEmptyLabel","find","undefined","back","history","FilterAvailableOptionsValueConverter","except","val"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { inject } from \"aurelia-framework\";\r\nimport { BindingEngine } from \"aurelia-binding\";\r\nimport { Router } from \"aurelia-router\";\r\nimport { Authentication } from \"./services/authentication\";\r\nimport { Busy } from \"./services/busy\"\r\nimport { Tracker } from \"./services/tracker\";\r\n\r\n@inject(BindingEngine, Router, Authentication, Busy, Tracker)\r\nexport class App {\r\n  constructor(bindingEngine, router, authentication, busy, tracker) {\r\n    this.bindingEngine = bindingEngine;\r\n    this.router = router;\r\n    this.authentication = authentication;\r\n    this.busy = busy;\r\n    this.isBusy = busy.isBusy;\r\n    this.tracker = tracker;\r\n    this.project = {};\r\n    this.user = {};\r\n    this.isEnlarged = false;\r\n  }\r\n\r\n  toggleEnlarged() {\r\n    this.isEnlarged = !this.isEnlarged;\r\n  }\r\n\r\n  activate() {\r\n    this.user = this.tracker.currentUser;\r\n    this.bindingEngine.propertyObserver(this.tracker, \"currentUser\")\r\n      .subscribe((newValue, oldValue) => {\r\n        this.user = this.tracker.currentUser;\r\n      });\r\n    \r\n    this.bindingEngine.propertyObserver(this.tracker, \"projectId\")\r\n      .subscribe((newValue, oldValue) => {\r\n        this.tracker.getProject(newValue)\r\n          .then(project => this.project = project);\r\n      });\r\n\r\n    this.bindingEngine.propertyObserver(this.busy, \"isBusy\")\r\n      .subscribe((newValue, oldValue) => this.isBusy = newValue);\r\n  }\r\n\r\n  logout() {\r\n    this.authentication.logout();\r\n    this.router.navigate(\"\");\r\n  }\r\n\r\n  configureRouter(config, router) {\r\n    var auth = true;\r\n\r\n    config.title = \"Pivotal Tracker Sprint Backlog\";\r\n    config.addPipelineStep(\"authorize\", this.authentication);\r\n    config.map([\r\n      { route: [\"\", \"login\"], moduleId: \"pages/login/login\", title: \"Login\", unAuthedOnly: true },\r\n      { route: \"select-project\", name: \"select-project\", moduleId: \"pages/projects/select\", title: \"Select Project\", auth },\r\n      { route: \"project/:id/sprint-backlog\", name: \"sprint-backlog\", moduleId: \"pages/backlog/sprint\", title: \"Sprint Backlog\", auth },\r\n      { route: \"settings\", name: \"settings\", moduleId: \"pages/settings/change\", title: \"Settings\", auth }\r\n    ]);\r\n  }\r\n}\r\n\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import environment from \"./environment\";\r\n\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature(\"./resources\");\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin(\"aurelia-testing\");\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","export function configure(config) {\r\n  //config.globalResources([]);\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { Redirect } from \"aurelia-router\";\r\nimport { Tracker } from \"./tracker\";\r\n\r\n@inject(Tracker)\r\nexport class Authentication {\r\n  constructor(tracker) {\r\n    this.tracker = tracker;\r\n  }\r\n\r\n  getUser() {\r\n    return this.tracker.currentUser;\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return this.tracker.isValid();\r\n  }\r\n\r\n  logout() {\r\n    this.tracker.token = null;\r\n  }\r\n\r\n  run(navigationInstruction, next) {\r\n    var instructions = navigationInstruction.getAllInstructions();\r\n    var auth = instructions.some(i => i.config.auth);\r\n    var unAuthedOnly = instructions.some(i => i.config.unAuthedOnly);\r\n\r\n    if (auth || unAuthedOnly) {\r\n      return this.isAuthenticated()\r\n        .then(result => {\r\n          return auth\r\n            ? next()\r\n            : next.cancel(new Redirect(\"select-project\"));\r\n        })\r\n        .catch(error => {\r\n          return unAuthedOnly\r\n            ? next()\r\n            : next.cancel(new Redirect(\"login\"));\r\n        });\r\n    } else {\r\n      return next();\r\n    }\r\n  }\r\n}\r\n","export class Busy {\r\n  constructor() {\r\n    this.isBusy = false;\r\n  }\r\n\r\n  on() {\r\n    this.isBusy = true;\r\n  }\r\n\r\n  off() {\r\n    this.isBusy = false;\r\n  }\r\n}\r\n","export class Local {\r\n  g (key) {\r\n    if (localStorage.getItem(key)) {\r\n      try {\r\n        return JSON.parse(localStorage.getItem(key));\r\n      } catch (err) {\r\n        this.d(key);\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n  s (key, value) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n\r\n  d (key) {\r\n    if (Array.isArray(key)) {\r\n      key.forEach(i => this.d(i));\r\n    }\r\n    localStorage.removeItem(key);\r\n  }\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { Local } from \"./local\";\r\n\r\n@inject(Local)\r\nexport class Settings {\r\n  constructor() {\r\n    this.storyStates = [\r\n       \"unscheduled\", \"unstarted\", \"started\", \"finished\", \"delivered\",\r\n       \"accepted\", \"rejected\", \"planned\"\r\n    ];\r\n\r\n    this.columnBaseTypes = [\"state\", \"label\"];\r\n    \r\n    this.columns = [\r\n      { title: \"Todo\", basedOn: \"state\", value: [\"planned\", \"unstarted\"] },\r\n      { title: \"Doing\", basedOn: \"state\", value: [\"started\"] },\r\n      { title: \"Testing\", basedOn: \"state\", value: [\"finished\"] },\r\n      { title: \"Done\", basedOn: \"state\", value: [\"delivered\", \"accepted\"] },\r\n      { title: \"Impedements\", basedOn: \"label\", value: [\"_blocked\"] }\r\n    ];\r\n  }\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { HttpClient } from \"aurelia-fetch-client\";\r\nimport { Busy } from \"./busy\"\r\nimport { Local } from \"./local\";\r\n\r\n@inject(HttpClient, Busy, Local)\r\nexport class Tracker {\r\n  constructor(client, busy, local) {\r\n    this.client = client;\r\n    this.busy = busy;\r\n    this.local = local;\r\n    this.ls = {\r\n      token: \"pivotal-tracker-token\",\r\n      user: \"pivotal-tracker-current-user\"\r\n    };\r\n    this.projectId = null;\r\n    this._projects = [];\r\n    this._currentUser = this.local.g(this.ls.user) || null;\r\n    this._users = {};\r\n    this._token = this.local.g(this.ls.token) || null;\r\n    this._configureClient();\r\n  }\r\n\r\n  _configureClient() {\r\n    this.client.configure(config => {\r\n      config\r\n        .withBaseUrl(\"https://www.pivotaltracker.com/services/v5/\")\r\n        .withDefaults({\r\n          headers: {\r\n            \"X-TrackerToken\": this._token\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  set currentUser(value) {\r\n    if (value) {\r\n      this._currentUser = value;\r\n      this.local.s(this.ls.user, value);\r\n    } else {\r\n      this._currentUser = null;\r\n      this.local.d(this.ls);\r\n    }\r\n  }\r\n\r\n  get currentUser() {\r\n    return this._token ? this._currentUser : null;\r\n  }\r\n\r\n  set token(value) {\r\n    if (!value) {\r\n      this._currentUser = null;\r\n      this._projectId = null;\r\n    }\r\n\r\n    this._token = value;\r\n\r\n    this.local.s(this.ls.token, value);\r\n\r\n    this._configureClient();\r\n  }\r\n\r\n  _fetch(url, inBackground) {\r\n    return new Promise((resolve, reject) => {\r\n      if (inBackground !== true) {\r\n        this.busy.on();\r\n      }\r\n\r\n      this.client.fetch(url)\r\n        .then(response => response.json())\r\n        .then(response => {\r\n          if (response.kind !== \"error\") {\r\n            resolve(response);\r\n          } else {\r\n            this.currentUser = null;\r\n            reject(new Error(response.code));\r\n          }\r\n          this.busy.off();\r\n        })\r\n        .catch(error => {\r\n          this.currentUser = null;\r\n          reject(error);\r\n          this.busy.off();\r\n        })\r\n    });\r\n  }\r\n\r\n  getProject(projectId) {\r\n    projectId = parseInt(projectId);\r\n    \r\n    return new Promise((resolve, reject) => {\r\n      this.getProjects()\r\n        .then(projects => {\r\n          projects.forEach(item => {\r\n            if (item.id === projectId) {\r\n              resolve(item);\r\n            }\r\n          });\r\n          resolve();\r\n        })\r\n        .catch(error => reject(error));\r\n    });\r\n  }\r\n\r\n  getProjects() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._projects && this._projects.length > 0) {\r\n        return resolve(this._projects);\r\n      }\r\n\r\n      this._fetch(\"projects\")\r\n        .then(projects => {\r\n          this._projects = projects;\r\n          resolve(this._projects);\r\n        })\r\n        .catch(error => reject(error));\r\n    });\r\n  }\r\n\r\n  getCurrent(inBackground) {\r\n    return this._fetch(`projects/${this.projectId}/iterations?scope=current_backlog&limit=1`, inBackground);\r\n  }\r\n\r\n  getUsers() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._users[this.projectId] && this._users[this.projectId].length > 0) {\r\n        return resolve(this._users[this.projectId]);\r\n      }\r\n\r\n      this._fetch(`projects/${this.projectId}/memberships`)\r\n        .then(users => {\r\n          this._users[this.projectId] = users;\r\n          resolve(this._users[this.projectId]);\r\n        })\r\n        .catch(error => reject(error));\r\n    });\r\n  }\r\n\r\n  isValid() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.currentUser) {\r\n        return resolve(this.currentUser);\r\n      }\r\n\r\n      if (!this._token) {\r\n        return reject(new Error(\"No token set\"));\r\n      }\r\n\r\n      this.client.fetch(\"me\")\r\n        .then(response => response.json())\r\n        .then(result => {\r\n          if (result.kind !== \"error\") {\r\n            this.currentUser = result;\r\n            resolve(this.currentUser);\r\n          } else {\r\n            this.currentUser = null;\r\n            reject(new Error(response.code));\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.currentUser = null;\r\n          reject(error);\r\n        });\r\n    });\r\n  }\r\n}\r\n","export class FilterColumnsValueConverter {\r\n  toView(array, config) {\r\n    if (Array.isArray(array) === false) {\r\n      return array;\r\n    }\r\n\r\n    var value = config.value;\r\n    if (Array.isArray(value) === false) {\r\n      value = [value];\r\n    }\r\n\r\n    return array.slice(0).filter(item => {\r\n      if (config.basedOn === \"state\") {\r\n        for (var i = 0; i < value.length; i++) {\r\n          if (item.current_state === value[i]) {\r\n            return true;\r\n          }\r\n        }\r\n      } else {\r\n        for (var i = 0; i < value.length; i++) {\r\n          for (var y = 0; y < item.labels.length; y++) {\r\n            if (item.labels[y].name === value[i]) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { Router } from \"aurelia-router\";\r\nimport { Tracker } from \"./../../services/tracker\";\r\nimport { Settings } from \"./../../services/settings\";\r\n\r\n@inject(Router, Tracker, Settings)\r\nexport class Sprint {\r\n  constructor(router, tracker, settings) {\r\n    this.columns = settings.columns;\r\n    this.router = router;\r\n    this.tracker = tracker;\r\n    this.iteration = {};\r\n    this.timeout = null;\r\n    this.pollInterval = 60000;\r\n    this.users = [];\r\n  }\r\n\r\n  activate(params, routeConfig) {\r\n    this.tracker.projectId = this.projectId = params.id;\r\n    this.tracker.getUsers()\r\n      .then(users => this.users = users)\r\n      .catch(error => this.router.navigate(\"\"));\r\n    this.startPoll(true);\r\n  }\r\n\r\n  deactivate() {\r\n    if (this.timeout) {\r\n      clearTimeout(this.timeout);\r\n    }\r\n  }\r\n\r\n  getUser(userId) {\r\n    userId = parseInt(userId);\r\n\r\n    for (var i = 0; i < this.users.length; i++) {\r\n      var user = this.users[i];\r\n\r\n      if (userId === user.person.id) {\r\n        return user;\r\n      }\r\n    }\r\n  }\r\n\r\n  startPoll(isFirst) {\r\n    this.tracker.getCurrent(!isFirst)\r\n      .then(iteration => {\r\n        this.iteration = iteration[0];\r\n        this.timeout = setTimeout(this.startPoll.bind(this), this.pollInterval);\r\n      })\r\n      .catch(error => this.router.navigate(\"\"));\r\n  }\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { Router } from \"aurelia-router\";\r\nimport { Tracker } from \"./../../services/tracker\";\r\n\r\n@inject(Tracker, Router)\r\nexport class Login {\r\n  constructor(tracker, router) {\r\n    this.tracker = tracker;\r\n    this.router = router;\r\n\r\n    this.placeholder = \"Enter API token..\";\r\n    this.token = \"4ea441cc4dcb4ee87426549edd244a95\";\r\n  }\r\n\r\n  setToken() {\r\n    if (this.token.length > 0) {\r\n      this.tracker.token = this.token;\r\n      this.tracker.isValid()\r\n        .then(result => {\r\n          this.router.navigate(\"select-project\");\r\n        })\r\n        .catch(error => {\r\n          console.log(\"Try again, stupid\");\r\n        });\r\n    } else {\r\n      console.log(\"Try again, stupid 2\");\r\n    }\r\n  }\r\n}\r\n","import { inject } from \"aurelia-framework\";\r\nimport { Router } from \"aurelia-router\";\r\nimport { Tracker } from \"./../../services/tracker\";\r\n\r\n@inject(Tracker, Router)\r\nexport class Select {\r\n  constructor(tracker, router) {\r\n    this.tracker = tracker;\r\n    this.tracker.projectId = null;\r\n    this.router = router;\r\n    this.projects = [];\r\n  }\r\n\r\n  attached() {\r\n    this.tracker.getProjects()\r\n      .then(projects => this.projects = projects)\r\n      .catch(error => this.router.navigate(\"\"));\r\n  }\r\n} \r\n","import { inject } from \"aurelia-framework\";\r\nimport { BindingEngine } from \"aurelia-binding\";\r\nimport {BindingSignaler} from 'aurelia-templating-resources';\r\nimport { Tracker } from \"./../../services/tracker\";\r\nimport { Settings } from \"./../../services/settings\";\r\nimport { FilterAvailableOptionsValueConverter } from \"./filter-available-options\";\r\n\r\n@inject(BindingSignaler, Tracker, Settings, FilterAvailableOptionsValueConverter)\r\nexport class Change {\r\n  constructor(bindingSignaler, tracker, settings, filter) {\r\n    this.bindingSignaler = bindingSignaler;\r\n    this.tracker = tracker;\r\n    this.settings = settings;\r\n    this.filter = filter;\r\n    this.subscriptions = [];\r\n  }\r\n\r\n  activate() {\r\n    this.availableStoryStates = this.filter.toView(this.settings.storyStates,\r\n      this.settings.columns).length > 0;\r\n  }\r\n\r\n  deactivate() {\r\n    let subscription;\r\n    while (subscription = this.subscriptions.pop()) {\r\n      subscription.dispose();\r\n    }\r\n  }\r\n\r\n  valueArrayChanged(newValue, oldValue) {\r\n    console.log(newValue);\r\n  }\r\n\r\n  valueHasChanged() {\r\n    this.bindingSignaler.signal(\"available-options-changed\");\r\n  }\r\n\r\n  removeValueFromColumn(value, column) {\r\n    column.value.splice(column.value.indexOf(value), 1);\r\n\r\n    this.availableStoryStates = this.filter.toView(this.settings.storyStates,\r\n      this.settings.columns).length > 0;\r\n  }\r\n\r\n  addValueForColumn(column) {\r\n    if (column.basedOn === \"label\") {\r\n      return column.value.push(\"\");\r\n    }\r\n\r\n    let available = this.filter.toView(this.settings.storyStates,\r\n      this.settings.columns);\r\n\r\n    if (available && available.length > 0) {\r\n      column.value.push(available[0]);\r\n    }\r\n\r\n    this.availableStoryStates = available.length > 1;\r\n    this.bindingSignaler.signal(\"available-options-changed\");\r\n  }\r\n\r\n  hasEmptyLabel(column) {\r\n    return column.value.find(item => {\r\n      return item.length === 0;\r\n    }) !== undefined;\r\n  }\r\n\r\n  back() {\r\n    history.back();\r\n  }\r\n}\r\n","export class FilterAvailableOptionsValueConverter {\r\n  toView(array, config, except) {\r\n    if (Array.isArray(array) === false) {\r\n      return array;\r\n    }\r\n\r\n    array = array.slice(0);\r\n\r\n    config.forEach(item => {\r\n      if (item.basedOn !== \"state\") {\r\n        return;\r\n      }\r\n      \r\n      item.value.forEach(val => {\r\n        if (val !== except && array.indexOf(val) !== -1) {\r\n          array.splice(array.indexOf(val), 1);\r\n        }\r\n      });\r\n    });\r\n\r\n    return array;\r\n  }\r\n}\r\n",null,null,null,null,null,null,null],"sourceRoot":"..\\src"}